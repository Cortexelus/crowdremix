
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.png">

    <title>Theme Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/theme.css" rel="stylesheet">

    <!-- bootstrap slider -->
    <link href="css/slider.css" rel="stylesheet">

    <style>

    .playhead { width: 100%; height: 100%; border: 2px solid #999; position: absolute; top: 0px;  } 
    .playhead-container { height: 50px; position: relative; cursor:crosshair}

    .palette-mapper { width: 100%; height: 100%; border: 2px solid #999; position: absolute; top: 0px;  } 
    .palette-mapper-container { height: 50px; position: relative; cursor:crosshair}

    /* .rhythm-display { width: 100%; height: 100%; border: 2px solid #999; position: absolute; top: 0px;  }  */
    .rhythm-display-container {  width: 302px; height: 10px; position: relative;}

    .song-title { color: #999;}

    #RC .slider-selection {
      background: #FF8282;
    }
    #RC .slider-handle {
      background: red;
    }
    #GC .slider-selection {
      background: #428041;
    }
    #GC .slider-handle {
      background: green;
    }
    #BC .slider-selection {
      background: #8283FF;
    }
    #BC .slider-handle {
      border-bottom-color: blue;
    }
    #step_slider, #pulse_slider, #tempo_slider {
      width: 300px;
    }
    .progress{ width: 300px;}
    </style>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>


  <body id="thebody">

    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Crowd Remix</a>
        </div>
      </div>
        
    </div>

    <div class="container theme-showcase">

      <!-- Main jumbotron for a primary marketing message or call to action -->
      <!--
      <div class="jumbotron">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called a jumbotron and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a href="#" class="btn btn-primary btn-lg" role="button">Learn more &raquo;</a></p>
      </div>
      -->
      <div class="col-sm-8  ">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <span id="artist-name"></span>
              <span id="song-title" class="song-title"></span>
            </h3>
          </div>
          <div class="panel-body">
            <div id="playhead-container" class="playhead-container">   
              <canvas id="playhead" class="playhead"></canvas>  
              <canvas id="playhead-highlight" class="playhead"></canvas>  
            </div>      
          </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">
                Sound Palette
              </h3>
            </div>
            <div class="panel-body">
              <div id="palette-mapper-container" class="palette-mapper-container">   
                <canvas id="palette-mapper" class="palette-mapper"></canvas>  
                <canvas id="palette-mapper-highlight" class="palette-mapper"></canvas>  
              </div>      
            </div>
        </div>
     </div>
    <div class="col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            Syncopation
          </h3>
        </div>
        <div class="panel-body" >
          <!-- <div id="rhythm-mapper-container" class="rhythm-mapper-contahiner">   
            <<canvas id="rhythm-mapper" class="rhythm-mapjper"></canvas>  
            <canvas id="rhythm-mapper-highlight" class="rhythjm-mapper"></canvas>  
          </div> -->
          <p>
            <b></b>  <span style="float: right" id="ui-steps"></span> <input type="text" class="span2" value="" data-slider-min="1" data-slider-max="16" data-slider-step="1" data-slider-value="8" data-slider-id="RC" id="step_slider" data-slider-tooltip="hide" data-slider-handle="square" >
          </p>
          <p>
            <b></b>  <span style="float: right" id="ui-pulses"></span> <input type="text" class="span2" value="" data-slider-min="1" data-slider-max="16" data-slider-step="1" data-slider-value="3" data-slider-id="GC" id="pulse_slider" data-slider-tooltip="hide" data-slider-handle="round" >
          </p>

          <div id="rhythm-display-container" class="rhythm-display-container">   
            <!-- <canvas id="rhythm-display" class="rhythm-display"></canvas>   -->
          </div>

          <div class="progress" id="rhythm-display">
            
          </div>

          <p>
            <b>Tempo</b> <span style="float: right" id="ui-tempo"></span> <input type="text" class="span2" value="" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" data-slider-id="BC" id="tempo_slider" data-slider-tooltip="hide" data-slider-handle="triangle" >
          </p>

          <!-- 
          <div id="draggable5" class="draggable ui-widget-content">
            <p>X</p>
          </div>
          -->

        </div>
      </div>






    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>

<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/holder.js"></script>


    <script src="js/draw-song.js"></script>
    <script src="js/soundengine.js"></script>
    <script src="js/bjorklund.js"></script>

    <script src="js/bootstrap-slider.js"></script>

    <script>
      var song = null;
      var savedLoops = {}
      $(function init(){

        song_file = "hotmess.mp3"
        song_segments_json_file = "hotmess4.segments.json"
        song_name = "Hot Mess"
        song_artist = "23"

        $.ajax( song_segments_json_file )
        .done(function(data) {
          song = new Song(0,song_file,song_name,song_artist,data.segments,data.palette);
          song.randomize_parameters()
        })
        .fail(function() {
          alert( "error" );
        });

        /*
        $( "#draggable5" ).draggable({ grid: [ 10,10 ],
        containment: "parent",
        drag: function(){
          return true

        } });*/

        $( "#thebody" ).keydown(function( event ) {
          /*if ( event.which == 13 ) {
           event.preventDefault();
          }*/
          var k = event.keyCode;
          if(k>=15 && k<=120){
            console.log(k)
            if(k in savedLoops){
              song.load_parameters(savedLoops[k])
            }else{
              params = song.save_parameters();
              savedLoops[k] = params
            }
          }
        });


      });


      
      
    </script>
  </body>
</html>